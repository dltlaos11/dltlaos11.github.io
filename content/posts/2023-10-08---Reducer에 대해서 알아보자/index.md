---
title: Reducer에 대해서 알아보자
date: "2023-10-08T23:35:32.169Z"
template: "post"
draft: false
slug: "/posts/redux/what-is-reducer"
category: "Redux"
tags:
  - "Redux"  
description: "Reducer에 대해서 배웁니다"
---

### ::리듀서는 비동기적인 코드 & side effects를 수행하면 안된다, 리듀서는 순수함수

> side effects?
> 
> 
> 부작용(side effect)은 프로그램의 실행 과정에서 함수나 모듈 외부에 영향을 미치는 것을 말합니다. 순수 함수(pure function)는 동일한 입력에 대해 항상 동일한 출력을 반환하고 외부에 영향을 미치지 않는 함수를 의미합니다. 이러한 함수는 부작용이 없습니다.
> 
> 부작용은 주로 다음과 같은 것들을 나타냅니다:
> 
> 1. **외부 데이터 변경:** 함수나 모듈이 외부 데이터를 변경하거나 파일에 쓰기, 데이터베이스 업데이트 등과 같은 작업을 수행합니다.
> 2. **네트워크 요청:** 함수나 모듈이 네트워크 요청을 보내고, 이로 인해 서버 상태가 변경되거나 응답을 받습니다.
> 3. **시간에 따른 작업:** 함수나 모듈이 타이머, 인터벌, 애니메이션과 같이 시간에 따라 작업을 수행합니다.
> 4. **외부 리소스 액세스:** 함수나 모듈이 외부 리소스에 접근하고 파일을 읽거나 센서 데이터를 수집하는 등의 작업을 수행합니다.
> 
> Redux와 같은 상태 관리 라이브러리에서 부작용은 주로 비동기 작업(네트워크 요청, 데이터 로딩)과 관련이 있습니다. 이러한 부작용을 관리하기 위해 Redux에서는 미들웨어를 사용하고, 리듀서는 순수 함수로 유지되어 예측 가능한 상태 변경을 담당합니다. 부작용을 효과적으로 처리하면 애플리케이션의 예측 가능성과 디버깅 용이성을 향상시킬 수 있습니다.
> 

이상 GPT의 대답이다.

그러면 비동기 작업(async task)와 side effects는 어디에서 수행되어야 할까?

- 컴포넌트 안에서(e.g. useEffect())
- 액션 생성자 안에서

이렇게?!

```tsx
export const registerBoard = (title: string, content: string, writer: string) = axios.post("/boards", {title, content, writer });
```

<aside>
💡 리덕스 상태를 리듀서 함수 외부에서 변경해서는  안댐

</aside>

### ::논리를 어디에 둘 것인가?

> 동기적 code, side effects free code(i.e. data transformations)
> 
> - Reducer를 선호
> - Action Creator와 Components를 피해야 함

> 비동기 코드(async) or code with side effects
> 
> - Action Creator와 Components를 선호
> - 절대 Reducer를 쓰지 말 것

<aside>
💡 Reducer 내부에서는 비동기 요청을 보내는 것은 리덕스의 원칙에 어긋나는 거야? 나는 리듀서가 순수함수여야 한다고 알 고 있어서 비동기 요청을 리듀서 내부에서 보낼 수 있는것인지 궁금해

</aside>

Redux의 리듀서는 순수 함수(pure function)여야 합니다. 리덕스의 세 가지 주요 원칙 중 하나는 "순수 함수를 사용하여 상태를 변경"하는 것입니다. 이 원칙을 지키려면 리듀서 함수는 순수하고 예측 가능해야 합니다.

순수 함수는 다음과 같은 특징을 갖습니다.

1. 동일한 입력 값에 대해 항상 동일한 출력 값을 반환합니다.
2. 외부의 상태나 데이터를 변경하지 않습니다.
3. `부작용(side effect)`을 일으키지 않습니다.

따라서 **비동기 작업을 수행하는 `API 호출`이나 `네트워크 요청`과 같은 작업은 리듀서 내부에서 직접 수행해서는 안 됩니다.** 비동기 작업은 `액션 크리에이터` 또는 `미들웨어`(예: `Redux Thunk`, `Redux Saga`)를 사용하여 처리해야 합니다.

:::Redux Thunk

예를 들어, `Redux Thunk`를 사용하는 경우, `액션 크리에이터 함수` 내에서 `비동기 작업을 처리`하고 액션을 디스패치하여 리듀서에 상태 변경을 알립니다. 이렇게 하면 리듀서 함수는 순수 함수로 유지됩니다.

따라서 리듀서 함수는 순수하고 예측 가능한 상태 변경을 담당하고, 비동기 작업은 다른 부분(액션 크리에이터 함수 또는 미들웨어)에서 처리하는 것이 Redux의 원칙을 준수하는 방법입니다.

:::Redux Saga

Redux Saga는 리덕스의 미들웨어로서, 비동기 작업을 처리하기 위해 액션과 리듀서 사이에 중간 역할을 합니다. Redux Saga는 제너레이터(generator) 함수를 사용하여 비동기 작업의 흐름을 더 선언적으로 제어합니다.

이상 GPT의 대답을 참고해봤다.